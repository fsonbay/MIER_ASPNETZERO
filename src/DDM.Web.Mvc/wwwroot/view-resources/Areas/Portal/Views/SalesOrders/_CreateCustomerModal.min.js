(function(n){app.modals.CreateCustomerModal=function(){var t,r=abp.services.app.customers,i=null;this.init=function(n){t=n;var r=t.getModal();r.find(".date-picker").datetimepicker({locale:abp.localization.currentLanguage.name,format:"L"});t.getModal().find("#CustomerCategoryEdit").selectpicker({iconBase:"fa",tickIcon:"fa fa-check"});i=t.getModal().find("form[name=CustomerInformationsForm]");i.validate()};this.save=function(){if(i.valid()){if(n("#CustomerCategoryEdit").prop("required")&&n("#CustomerCategoryEdit").val()==""){abp.message.error(app.localize("{0}IsRequired",app.localize("CustomerCategory")));return}var u=i.serializeFormToObject();t.setBusy(!0);r.createNewCustomer(u).done(function(i){abp.notify.info(app.localize("NewCustomerAddedSuccessfully"));t.close();abp.event.trigger("app.createCustomerModalSaved");var r=u.name+" ("+u.company+")";n("#CustomerId").append(n("<option>",{value:i,text:r,selected:!0}));n(".selectpicker").selectpicker("refresh")}).always(function(){t.setBusy(!1)})}}}})(jQuery);